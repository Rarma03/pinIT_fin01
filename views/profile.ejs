<% include ./partials/header.ejs %>

<div class="profile w-full h-screen min-h-screen bg-zinc-800 text-white pt-1">
    <form id="uploadform" hidden action="/fileupload" method="post" enctype="multipart/form-data">
        <input type="file" name="image">
    </form>
    <div class="profdets flex items-center flex-col mt-20">
        <div class="relative">
            <span id="uploadicon" class="w-10 h-10 absolute bottom-0 right-0 rounded-full flex items-center justify-center bg-zinc-200">
                <i class="ri-pencil-line text-zinc-800"></i>
            </span>
            <div class="w-32 h-32 rounded-full bg-zinc-200 overflow-hidden">
                <img class="h-full w-full object-cover" src="/images/uploads/<%= user.profileImage %>" alt="">
            </div>
        </div>
        <!-- <h1 class="text-3xl font-semibold mt-5">Name</h1> -->
        <h1 class="text-3xl font-semibold mt-5"><%= user.username %></h1>
        <!-- <h1 class="text-md">@username</h1> -->
        <h1 class="text-md">@<%= user.username %></h1>
        <a href="/edit" class="px-7 py-2 bg-zinc-700 rounded-full text-xs font-semibold mt-5">Edit</a>
        <a href="/add" class="bg-red-700 mt-10 rounded-full px-7 py-2">+ Add New Post</a>
    </div>
    <div class="cards flex flex-wrap gap-10 mt-10 px-10">
        <div class="card">             
            <div class="w-52 h-40 bg-zinc-200 rounded-md overflow-hidden">
                <img class="object-cover h-full w-full" src="https://images.unsplash.com/photo-1515041219749-89347f83291a?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="">
            </div>
            <h3 class="text-xl font-semibold mt-3">Start Creating Pins</h3>
            <h5 class="text-sm font-regular opacity-60">5 Pins</h5>
        </div>
        
        <% if(user.postid.length != 0){%>
            <div class="card">             
                <div class="w-52 h-40 bg-zinc-200 rounded-md overflow-hidden">
                    <img class="object-cover h-full w-full" src="/images/uploads/<%= user.postid[0].image%>" alt="">
                </div>
                <a href="/show/posts" class="inline-block text-xl font-semibold mt-3"><%=  user.postid[0].title%></a>
                <h5 class="text-sm font-regular opacity-60"><%= user.postid.length %></h5>
            </div>
        <%}%>
    </div>
</div>

<script>
    document.querySelector('#uploadicon').addEventListener("click",function(){
        document.querySelector('#uploadform input').click();
    })

    document.querySelector('#uploadform input').addEventListener("change",function(){
        document.querySelector('#uploadform').submit();
    })
</script>

<% include ./partials/footer.ejs %>